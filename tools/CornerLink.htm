<!DOCTYPE HTML SYSTEM "-//Macromedia//DWExtension layout-engine 5.0//dialog">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>Corner Link</title>
<script language="JavaScript">

function isDOMRequired() { 
	// Return false, indicating that this object is available in code view.
	return false;
}

function objectTag() {

	var listener="";
	var parameters = "";
	var page = "";
 	
	if (document.linkedTagForm.listener.value != ""){
		listener = document.linkedTagForm.listener.value;
	}
	else {
		listener='doViewRelativeEntityListAction'; 
	}

	if (document.linkedTagForm.parameters.value != ""){
		parameters=document.linkedTagForm.parameters.value;
	}
	else {
		parameters='entity'; 
	}
	
	if (document.linkedTagForm.page.value != ""){
		page=document.linkedTagForm.page.value;
	}
	else {
		page='index.html'; 
	}
	
	
	//see the radio
	var returnStr;
	
	var newEntityLinkNode = document.getElementById("newEntityLinkField");
	if(newEntityLinkNode.checked){
		returnStr = "<a href=\""+page+"\" jwcid=\"newEntityLink\">";
	}
	var editEntityLinkNode = document.getElementById("editEntityLinkField");
	var deleteEntityLinkNode = document.getElementById("deleteEntityLinkField");
	var cancelEntityLinkNode = document.getElementById("cancelEntityLinkField");
	
	var PageLinkNode = document.getElementById("PageLinkField");
	var DirectLinkNode = document.getElementById("DirectLinkField");
		

	
	var dom = dw.getDocumentDOM();
	//if (dw.getFocus() == 'textView' || dw.getFocus(true) == 'html'){
          // Manually wrap tags around selection.                 
          	dom.source.wrapSelection("<span id=\""+listener+"Field\" jwcid=\"@Insert\" value=\"ognl:"+parameters+"."+listener+"\">","</span>");
          	return;        
	
	}

	function displayHelp(){
		dreamweaver.browseDocument("mailto:Ghostbb@bjmaxinfo.com");
	}
	
	
	function displayForm(){
		var showFormNode = document.getElementById("showForm");
		var showFormNode1 = document.getElementById("showForm1");
		showFormNode.style.display="block";
		showFormNode1.style.display="block";
	}
	function hiddenForm(){
		var showFormNode = document.getElementById("showForm");
		var showFormNode1 = document.getElementById("showForm1");
		showFormNode.style.display="none";
		showFormNode1.style.display="none";
	}
	
</script>
</head>

<body>
<form action="" method="post" name="linkedTagForm" id="linkedTagForm">
 <table width="380" border="0" cellspacing="3" cellpadding="2" align="center">
  <tr>
  	<td colspan="2">
    	<table border="0" width="100%">
        	<tr align="center">
            	<td>新增</td><td><input type="radio" name="links" id="newEntityLinkField" onClick="hiddenForm()"/></td>
                <td>编辑</td><td><input type="radio" name="links" id="editEntityLinkField" onClick="hiddenForm()"/></td>
                <td>删除</td><td><input type="radio" name="links" id="deleteEntityLinkField" onClick="hiddenForm()"/></td>
                <td>返回</td><td><input type="radio" name="links" id="cancelEntityLinkField" onClick="hiddenForm()"/></td>
            </tr>
        	<tr align="center">
            	<td>PageLink</td><td><input type="radio" name="links" id="PageLinkField" onClick="displayForm()"/></td>
                <td>DirectLink</td><td><input type="radio" name="links" id="DirectLinkField" onClick="displayForm()" checked/></td>
                <td colspan="4">&nbsp;</td>
            </tr>
        </table>
    </td>
  </tr>
  <tr id="showForm" style="display:block">
  <td align="left" width="40%"><font face="新宋体" size="2">html link page:</font></td>
   <td>
     <input type="text" name="page" id="pageField" size="42">
   </td>
   </tr>
  <td align="left" width="40%"><font face="新宋体" size="2">listener:</font></td>
   <td>
     <input type="text" name="listener" id="listenerField" size="42">
   </td>
   </tr>
   <tr id="showForm1" style="display:block">
   <td align="left"><font face="新宋体" size="2">parameters(例如:a,b):</font></td>
   <td>
     <input type="text" name="parameters" id="parametersField" size="42">
   </td>
  </tr>
 </table>
 <hr>
<p align="center">bjmaxinfo'Ghostbb</p>
</form>
</body>
</html>
