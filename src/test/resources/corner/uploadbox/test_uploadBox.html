<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>test FieldPlusEq validator</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
<SCRIPT LANGUAGE="JavaScript">
<!--

djConfig = { isDebug: true
          };

//-->
</SCRIPT>
<SCRIPT LANGUAGE="JavaScript" src="../../../../main/js/dojo/dojo.js"></script>
<SCRIPT LANGUAGE="JavaScript" src="../../../../main/js/corner/corner.js"></script>
<script type="text/javascript" src="../../../../main/js/corner/prototype/window/javascripts/prototype.js"> </script> 
</head>

<body>
<img id="ImageField" style="display: 'none'"/>
<input type="file" id="blobDataField" onpropertychange="f(this)">

<SCRIPT LANGUAGE="JavaScript">
<!--
$('ImageField').setStyle({
	filter:'progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image)'
});

function f(theimg){
	var objimg = dojo.byId('ImageField');
	var filepath = dojo.byId('blobDataField').value;
    re=/\\/g
    filepath = filepath.replace(re,'/');
    var fileext = filepath.substring(filepath.length-4,filepath.length)
    fileext = fileext.toLowerCase();
    if (fileext=='.gif' || fileext=='.png' || fileext=='.jpg'){
        objimg.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = filepath;
		objimg.style.width = d.offsetWidth;
		objimg.style.height = d.offsetHeight;
		objimg.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").sizingMethod = 'scale';
		objimg.width = d.offsetWidth;
		objimg.height = d.offsetHeight;
    }
    else{
        objimg.style.display='none';
    }
}

	
//-->
</SCRIPT>
	
</body>

</html>